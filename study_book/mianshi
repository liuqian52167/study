# 数据库部分
## 一事物
事务指的是满足acid特性可以通过Cmmit提交一个一个事务，也可以Rollback进行回滚。
原子性;Atomicity
事务被视为不可分割的最小单元，事务的所有操作要么全部被提交成功，要么全部失败回滚。

一致性：Consistency

数据库在事务执行前后都保持一致性状态。在一致性状态下，所有食物对一个数据的读取结果都是相同的。

隔离性ISOLATION

一个事务所做的修改在最终提交以前，对其他事务是不可见的。

持久性 Durability

一旦事务提交，则其做的的修改将会永久的保存在数据库中。即使系统发生崩溃，事务执行的结果也不能丢失。

## 二并发一致性问题
丢失修改

T1和T2两个事务都对一个数据进行修改，T1先修改T2后修改，T2的修改覆盖了T1的修改。

读脏数据

T1修改的数据，T2随后读取，如果T1撤销了这次修改，T2读的数据是脏数据。

不可重复读

T2读取一个数据T1对其进行了修改，T2再次读取这个数据，则读取的结果和第一次不同。

幻影读

T1读取的某个范围的数据，T2在这个范围插入新的数据，T1再次读取这个范围的数据，此时的读取的结果和第一次不同。


## 三 封锁
封锁的力度

mysql提供两种封锁的粒度：行级锁和表级锁。

原则：尽量之锁定所需要修改的那部分的数据，而不是所有数据。锁定的数据量越小，发生锁争用的可能越小，系统的并发程度越高。
但是枷锁需要消耗系统的资源，锁的各种操作都会增加系统的各种开销。因此封锁的粒度越小，系统的开销越大。

封锁的类型

1读写锁
    
    排它锁 简称为x锁 又称为写锁
    共享锁 简称s锁
    
