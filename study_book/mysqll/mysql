# mysql高性能
## 第一章
### mysql的逻辑架构
第一层 最上层的服务，不是MySQL独有，有链接处理、授权认证和安全等
第二层MySQL的狠心服务都在这一层。包括查询解析、分析、优化、缓存以及内置函数（时间、日期数学和加密函数）
第三层包含了存储引擎，存储引擎负责MySQL中数据的存储和提取。存储引擎不会解析sql，不同的存储引擎也不会相互通信，只是简单
的响应上层服务器的请求。

>>第一层客户端

>>第二层
>>>连接线程处理

>>> 查询缓存

>>>解析器

>>> 优化器

>>> 存储引擎

#### 1.1.1链接管理与安全性
客户端连接在服务器进程中拥有一个进程。这个链接的查询只会在独立的线程中执行，该线程只能轮流在某个cpu核心或者cpu中运行
服务器负责存线程，因此不需要为每一个新建的链接创建或者销毁线程。

#### 1.1.2优化与执行

    mysql会解析查询，并创建内部数据结构（解析树），然后对其各种优化，包括重写查询、决定表的读取
    顺序，以及选择适当的索引等。用户可以通过特殊的关键字提示优化器，影响它的决策过程。也可以请求优化器解释优化过程
    的各个因素
    
### 1.2并发控制
mysql 在两个层面的并发：：服务器层和存储引擎层
。本文只关注控制并发读写。

#### 1.2.1读写锁
在处理读或者写的时候可以通过实现一个有两种类型的所组成的所系统来解决问题，共享锁（读锁）、排它锁（写锁）
#### 1.2.2 锁粒度
一种提高共享资源并发的方式就是让锁定对象有更多选择。尽量只锁定只需要修改的部分数据。更理想的方式只会对修改的数据提供
精确的锁定。任何时候在给定的资源上锁定的数据越少，则系统的并发越高

 
    
